{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
     Round  {{ subsession.round_number }}
{% endblock %}

{% block content %}
    <style>
           .myclass::-webkit-slider-thumb {
            box-shadow: 1px 1px 1px #000000, 0px 0px 1px #007afe;
            border: 1px solid #000000;
            height: 21px !important;
            width: 10px !important;
            border-radius: 0px !important;
            background: #ffffff !important;
            cursor: pointer !important !important;
            -webkit-appearance: none !important;
            margin-top: -7px !important;
        }

        input[name=guess1] {
            -webkit-appearance: none;
            margin: 18px 0;
            width: 100%;
        }

        input[name=guess1]:focus {
            outline: none;
        }

        input[name=guess1]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8.4px;
            cursor: pointer;
            animate: 0.2s;
            background: linear-gradient(to right, #001beb 0%, #f50000 100%);
            border-radius: 0px;
            border: 0.0px solid #ffffff;
            color: #13bba4;
        }

        input[name=guess1]::-webkit-slider-thumb {
            border: 0px;
            height: 0px;
            width: 0px;
            border-radius: 0px;
            -webkit-appearance: none;
        }
    </style>

    <style>
      .otree-form-errors {
        visibility: hidden;
        display: none;
    }
    </style>

    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
    .tg .tg-7btt{border-color:inherit;font-weight:bold;text-align:center;vertical-align:top}
    </style>

    <p>Here are your first 3 signals generated by Robots X, Y, and Z:</p>

    {% if s1 == 1  and s2 == 1 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:red";>red</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 1  and s2 == 1 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:red";>red</span>, <span style="color:blue";>blue</span>)</p>
    {% elif s1 == 1  and s2 == 0 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:blue";>blue</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 0  and s2 == 1 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:red";>red</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 1  and s2 == 0 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>)</p>
    {% elif s1 == 0  and s2 == 1 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:#ff0000" ;>red</span>, <span style="color:blue" ;>blue</span>)</p>
    {% elif s1 == 0  and s2 == 0 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 0  and s2 == 0 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>)</p>
    {% endif %}

    {% if subsession.round_number > 7 %}
        <p>Here is the table of 3000 simulated rounds:</p>

        <table class="tg">
        <thead>
          <tr>
            <th class="tg-7btt">Signals (1, 2, 3) &#x2192;</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
            <td class="tg-c3ow">{{ Rrrr }}</td>
            <td class="tg-c3ow">{{ Rrrb }}</td>
            <td class="tg-c3ow">{{ Rrbr }}</td>
            <td class="tg-c3ow">{{ Rbrr }}</td>
            <td class="tg-c3ow">{{ Rrbb }}</td>
            <td class="tg-c3ow">{{ Rbrb }}</td>
            <td class="tg-c3ow">{{ Rbbr }}</td>
            <td class="tg-c3ow">{{ Rbbb }}</td>
          </tr>
          <tr>
            <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
            <td class="tg-c3ow">{{ Brrr }}</td>
            <td class="tg-c3ow">{{ Brrb }}</td>
            <td class="tg-c3ow">{{ Brbr }}</td>
            <td class="tg-c3ow">{{ Bbrr }}</td>
            <td class="tg-c3ow">{{ Brbb }}</td>
            <td class="tg-c3ow">{{ Bbrb }}</td>
            <td class="tg-c3ow">{{ Bbbr }}</td>
            <td class="tg-c3ow">{{ Bbbb }}</td>
          </tr>
          <td class="tg-7btt"> Signal Total </td>
            <td class="tg-c3ow">{{ rrr }}</td>
            <td class="tg-c3ow">{{ rrb }}</td>
            <td class="tg-c3ow">{{ rbr }}</td>
            <td class="tg-c3ow">{{ brr }}</td>
            <td class="tg-c3ow">{{ rbb }}</td>
            <td class="tg-c3ow">{{ brb }}</td>
            <td class="tg-c3ow">{{ bbr }}</td>
            <td class="tg-c3ow">{{ bbb }}</td>
          </tr>
        </tbody>
        </table>
    <br>
    {% endif %}



{#    {% formfield player.guess1 %}#}
    <script>
        $(document).ready(function () {
            $('input[name=guess1]').on('input change', function () {
                $('input[name=guess1]').addClass('myclass');
            });
            $('input[name=guess1]').on('input', function() {
                document.getElementById("feedback_one").innerHTML = `You have selected `+$(this).val()+'%.';
                $('#id_check_slider_one').val(1);
            });
        });
    </script>
    <p>
      Guess 1: What do you think is the chance that the assigned color for the round is <span style="color:red;font-weight:bold">Red</span>?
    </p>
    <input type="hidden" name="check_slider_one" value="None" id="id_check_slider_one"/>
    <input type="range" name="guess1" value="None" step="1" style="width:500px" min="0" max="100" id="id_slider_one" class="form-control"/>
    <p id="feedback_one"><br></p>
    {% if form.errors %}
    <div class="alert alert-danger" role="alert">
      <h4> Please use the slider to make a decision.</h4>
    </div>
    {% endif %}
    <br>
    {% next_button %}

    <br>

    <h5>
        Calculator
    </h5>
    <body>
      <form name="calculator">
         <table>
            <tr>
               <td colspan="4">
                  <input type="text" name="display" id="display" >
               </td>
            </tr>
            <tr>
               <td><input type="button" id="clear" name="clear" value="C" onclick="calculator.display.value = ''"></td>
               <td><input type="button" id="lparenthesis" name="lparenthesis" value="(" onclick="calculator.display.value += '('"></td>
               <td><input type="button" id="rparenthesis" name="rparenthesis" value=")" onclick="calculator.display.value += ')'"></td>
               <td><input type="button" class="operator" name="div" value="/" onclick="calculator.display.value += '/'"></td>

            </tr>
            <tr>
               <td><input type="button" name="seven" value="7" onclick="calculator.display.value += '7'"></td>
               <td><input type="button" name="eight" value="8" onclick="calculator.display.value += '8'"></td>
               <td><input type="button" name="nine" value="9" onclick="calculator.display.value += '9'"></td>
               <td><input type="button" class="operator" name="times" value="x" onclick="calculator.display.value += '*'"></td>
            </tr>
            <tr>
               <td><input type="button" name="four" value="4" onclick="calculator.display.value += '4'"></td>
               <td><input type="button" name="five" value="5" onclick="calculator.display.value += '5'"></td>
               <td><input type="button" name="six" value="6" onclick="calculator.display.value += '6'"></td>
               <td><input type="button" class="operator" name="minus" value="-" onclick="calculator.display.value += '-'"></td>

            </tr>
            <tr>
               <td><input type="button" name="one" value="1" onclick="calculator.display.value += '1'"></td>
               <td><input type="button" name="two" value="2" onclick="calculator.display.value += '2'"></td>
               <td><input type="button" name="three" value="3" onclick="calculator.display.value += '3'"></td>
               <td><input type="button" class="operator" name="plus" value="+" onclick="calculator.display.value += '+'"></td>
            </tr>
            <tr>
               <td></td>
               <td><input type="button" name="zero" value="0" onclick="calculator.display.value += '0'"></td>
               <td><input type="button" name="." value="." onclick="calculator.display.value += '.'"></td>
               <td><input type="button" name="doit" value="=" onclick="calculator.display.value = parseFloat(eval(calculator.display.value)).toFixed(2)"></td>

            </tr>
         </table>
      </form>
    </body>
    <h5>
        Reference for signals
    </h5>
    <img src="{% static 'robots_in_round.png'%}" alt="signal graph" height="300"/>

{% endblock %}


