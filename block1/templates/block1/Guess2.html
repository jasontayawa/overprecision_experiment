{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Round  {{ subsession.round_number  }}
{% endblock %}

{% block content %}
    <style>
           .myclass::-webkit-slider-thumb {
            box-shadow: 1px 1px 1px #000000, 0px 0px 1px #007afe;
            border: 1px solid #000000;
            height: 21px !important;
            width: 10px !important;
            border-radius: 0px !important;
            background: #ffffff !important;
            cursor: pointer !important !important;
            -webkit-appearance: none !important;
            margin-top: -7px !important;
        }

        input[name=guess2] {
            -webkit-appearance: none;
            margin: 18px 0;
            width: 100%;
        }

        input[name=guess2]:focus {
            outline: none;
        }

        input[name=guess2]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8.4px;
            cursor: pointer;
            animate: 0.2s;
            {#box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;#}
            background: #007afe;
            border-radius: 0px;
            border: 0.0px solid #ffffff;
        }

        input[name=guess2]::-webkit-slider-thumb {
            border: 0px;
            height: 0px;
            width: 0px;
            border-radius: 0px;
            -webkit-appearance: none;
        }
    </style>
    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
    .tg .tg-7btt{border-color:inherit;font-weight:bold;text-align:center;vertical-align:top}
    </style>

    <style>
      .otree-form-errors {
        visibility: hidden;
        display: none;
    }
    </style>

    <p>Here are your first 3 signals generated by Robots X, Y, and Z:</p>

    {% if s1 == 1  and s2 == 1 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:red";>red</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 1  and s2 == 1 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:red";>red</span>, <span style="color:blue";>blue</span>)</p>
    {% elif s1 == 1  and s2 == 0 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:blue";>blue</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 0  and s2 == 1 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:red";>red</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 1  and s2 == 0 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:red";>red</span>, <span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>)</p>
    {% elif s1 == 0  and s2 == 1 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:#ff0000" ;>red</span>, <span style="color:blue" ;>blue</span>)</p>
    {% elif s1 == 0  and s2 == 0 and s3 == 1 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>, <span style="color:red";>red</span>)</p>
    {% elif s1 == 0  and s2 == 0 and s3 == 0 %}
        <p>Signals (1, 2, 3) &#x2192; (<span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>, <span style="color:blue";>blue</span>)</p>
    {% endif %}

    {% if subsession.round_number > 10 %}
        <p>Here is the table of 2000 simulated rounds:</p>

        <table class="tg">
        <thead>
          <tr>
            <th class="tg-7btt">Signals (1, 2, 3) &#x2192;</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
            <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
            <td class="tg-c3ow">{{ Rrrr }}</td>
            <td class="tg-c3ow">{{ Rrrb }}</td>
            <td class="tg-c3ow">{{ Rrbr }}</td>
            <td class="tg-c3ow">{{ Rbrr }}</td>
            <td class="tg-c3ow">{{ Rrbb }}</td>
            <td class="tg-c3ow">{{ Rbrb }}</td>
            <td class="tg-c3ow">{{ Rbbr }}</td>
            <td class="tg-c3ow">{{ Rbbb }}</td>
          </tr>
          <tr>
            <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
            <td class="tg-c3ow">{{ Brrr }}</td>
            <td class="tg-c3ow">{{ Brrb }}</td>
            <td class="tg-c3ow">{{ Brbr }}</td>
            <td class="tg-c3ow">{{ Bbrr }}</td>
            <td class="tg-c3ow">{{ Brbb }}</td>
            <td class="tg-c3ow">{{ Bbrb }}</td>
            <td class="tg-c3ow">{{ Bbbr }}</td>
            <td class="tg-c3ow">{{ Bbbb }}</td>
          </tr>
          <td class="tg-7btt"> Signal Total </td>
            <td class="tg-c3ow">{{ rrr }}</td>
            <td class="tg-c3ow">{{ rrb }}</td>
            <td class="tg-c3ow">{{ rbr }}</td>
            <td class="tg-c3ow">{{ brr }}</td>
            <td class="tg-c3ow">{{ rbb }}</td>
            <td class="tg-c3ow">{{ brb }}</td>
            <td class="tg-c3ow">{{ bbr }}</td>
            <td class="tg-c3ow">{{ bbb }}</td>
          </tr>
        </tbody>
        </table>
    <br>
    {% endif %}


    <p>Your Guess 1 is {{ player.guess1 }}%</p>
    <br>

    <p>Here is your last signal:</p>

    {% if s4 == 1 %}
        <p>Signal 4 &#x2192; (<span style="color:red";>red</span>)</p>
    {% elif s4 == 0 %}
        <p>Signal 4 &#x2192; (<span style="color:blue";>blue</span>)</p>
    {% endif %}

    {% if  subsession.round_number > 20 %}
    {% if s1 == 1 and s2 == 1 %}
            <p>Here is the table of 2000 simulated rounds given <span style="font-weight: bold">signals 1 and 2 are  <span style="color:red";>red</span></span>:</p>
            <table class="tg">
            <thead>
              <tr>
                <th class="tg-7btt">Signals (3, 4) &#x2192;</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
                <td class="tg-c3ow">{{ Rrr_rr }}</td>
                <td class="tg-c3ow">{{ Rrb_rr }}</td>
                <td class="tg-c3ow">{{ Rbr_rr }}</td>
                <td class="tg-c3ow">{{ Rbb_rr }}</td>
              </tr>
              <tr>
                <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
                <td class="tg-c3ow">{{ Brr_rr }}</td>
                <td class="tg-c3ow">{{ Brb_rr }}</td>
                <td class="tg-c3ow">{{ Bbr_rr }}</td>
                <td class="tg-c3ow">{{ Bbb_rr }}</td>
              </tr>
              <tr>
                <td class="tg-7btt">Signal Total</td>
                <td class="tg-c3ow">{{ rr_rr }}</td>
                <td class="tg-c3ow">{{ rb_rr }}</td>
                <td class="tg-c3ow">{{ br_rr }}</td>
                <td class="tg-c3ow">{{ bb_rr }}</td>
              </tr>
            </tbody>
            </table>
        {% elif s1 == 1 and s2 == 0 %}
            <p>Here is the table of 2000 simulated rounds given <span style="font-weight: bold">signal 1 is <span style="color:red";>red</span> and signal 2 <span style="color:blue";>blue</span></span>:</p>
            <table class="tg">
            <thead>
              <tr>
                <th class="tg-7btt">Signals (3, 4) &#x2192;</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
                <td class="tg-c3ow">{{ Rrr_rb }}</td>
                <td class="tg-c3ow">{{ Rrb_rb }}</td>
                <td class="tg-c3ow">{{ Rbr_rb }}</td>
                <td class="tg-c3ow">{{ Rbb_rb }}</td>
              </tr>
              <tr>
                <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
                <td class="tg-c3ow">{{ Brr_rb }}</td>
                <td class="tg-c3ow">{{ Brb_rb }}</td>
                <td class="tg-c3ow">{{ Bbr_rb }}</td>
                <td class="tg-c3ow">{{ Bbb_rb }}</td>
               </tr>
              <tr>
                <td class="tg-7btt">Signal Total</td>
                <td class="tg-c3ow">{{ rr_rb }}</td>
                <td class="tg-c3ow">{{ rb_rb }}</td>
                <td class="tg-c3ow">{{ br_rb }}</td>
                <td class="tg-c3ow">{{ bb_rb }}</td>
               </tr>
            </tbody>
            </table>
        {% elif s1 == 0 and s2 == 1 %}
            <p>Here is the table of 2000 simulated rounds given <span style="font-weight: bold">signal 1 is <span style="color:blue";>blue</span> and signal 2 <span style="color:red";>red</span></span>:</p>
            <table class="tg">
            <thead>
              <tr>
                <th class="tg-7btt">Signals (3, 4) &#x2192;</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
                <td class="tg-c3ow">{{ Rrr_br }}</td>
                <td class="tg-c3ow">{{ Rrb_br }}</td>
                <td class="tg-c3ow">{{ Rbr_br }}</td>
                <td class="tg-c3ow">{{ Rbb_br }}</td>
              </tr>
              <tr>
                <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
                <td class="tg-c3ow">{{ Brr_br }}</td>
                <td class="tg-c3ow">{{ Brb_br }}</td>
                <td class="tg-c3ow">{{ Bbr_br }}</td>
                <td class="tg-c3ow">{{ Bbb_br }}</td>
               </tr>
              <tr>
                <td class="tg-7btt">Signal Total</td>
                <td class="tg-c3ow">{{ rr_br }}</td>
                <td class="tg-c3ow">{{ rb_br }}</td>
                <td class="tg-c3ow">{{ br_br }}</td>
                <td class="tg-c3ow">{{ bb_br }}</td>
               </tr>
            </tbody>
            </table>
        {% elif s1 == 0 and s2 == 0 %}
            <p>Here is the table of 2000 simulated rounds given <span style="font-weight: bold">signals 1 and 2 are  <span style="color:blue";>blue</span></span>:</p>
            <table class="tg">
            <thead>
              <tr>
                <th class="tg-7btt">Signals (3, 4) &#x2192;</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>
                <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="tg-7btt">Color <span style="color:red";>Red</span></td>
                <td class="tg-c3ow">{{ Rrr_bb }}</td>
                <td class="tg-c3ow">{{ Rrb_bb }}</td>
                <td class="tg-c3ow">{{ Rbr_bb }}</td>
                <td class="tg-c3ow">{{ Rbb_bb }}</td>
              </tr>
              <tr>
                <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>
                <td class="tg-c3ow">{{ Brr_bb }}</td>
                <td class="tg-c3ow">{{ Brb_bb }}</td>
                <td class="tg-c3ow">{{ Bbr_bb }}</td>
                <td class="tg-c3ow">{{ Bbb_bb }}</td>
               </tr>
              <tr>
                <td class="tg-7btt">Signal Total</td>
                <td class="tg-c3ow">{{ rr_bb }}</td>
                <td class="tg-c3ow">{{ rb_bb }}</td>
                <td class="tg-c3ow">{{ br_bb }}</td>
                <td class="tg-c3ow">{{ bb_bb }}</td>
               </tr>
            </tbody>
            </table>
        {%  endif %}
    <br>
    {% endif %}



{#    <p>Here is the table of 2000 simulated rounds given <span style="font-weight: bold">signals 1 and 2 are  <span style="color:red";>red</span></span>:</p>#}
{##}
{#    <table class="tg">#}
{#    <thead>#}
{#      <tr>#}
{#        <th class="tg-7btt">Signals (3, 4) &#x2192;</th>#}
{#        <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:red";>red</span>)</th>#}
{#        <th class="tg-c3ow">(<span style="color:red";>red</span>,<span style="color:blue";>blue</span>)</th>#}
{#        <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:red";>red</span>)</th>#}
{#        <th class="tg-c3ow">(<span style="color:blue";>blue</span>,<span style="color:blue";>blue</span>)</th>#}
{#      </tr>#}
{#    </thead>#}
{#    <tbody>#}
{#      <tr>#}
{#        <td class="tg-7btt">Color <span style="color:red";>Red</span></td>#}
{#        <td class="tg-c3ow">{{ Rrr_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Rrb_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Rbr_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Rbb_rr }}</td>#}
{#      </tr>#}
{#      <tr>#}
{#        <td class="tg-7btt">Color <span style="color:blue";>Blue</span></td>#}
{#        <td class="tg-c3ow">{{ Brr_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Brb_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Bbr_rr }}</td>#}
{#        <td class="tg-c3ow">{{ Bbb_rr }}</td>#}
{#       </tr>#}
{#    </tbody>#}
{#    </table>#}



{#    {% formfield player.guess2 %}#}
    <script>
	$(document).ready(function () {
	    $('input[name=guess2]').on('input change', function () {
                $('input[name=guess2]').addClass('myclass');
            });
    	$('input[name=guess2]').on('input', function() {
        	document.getElementById("feedback_two").innerHTML = `You have selected `+$(this).val()+'%.';
        	$('#id_check_slider_two').val(1);
    	});
    });
    </script>
    <input type="hidden" name="check_slider_two" value="" id="id_check_slider_two"/>
    <input type="range" name="guess2" value="None" step="1" style="width:500px" min="0" max="100" id="id_slider_two" class="form-control">
    <p id="feedback_two"><br></p>
    {% if form.errors %}
    <div class="alert alert-danger" role="alert">
      <h4> Please use the slider to make a decision.</h4>
    </div>
    {% endif %}
    <br>
    {% next_button %}

    <br>

    <h5>
        Reference for signals
    </h5>
    <img src="{% static 'robots_in_round.png'%}" alt="signal graph" height="300"/>
{% endblock %}
